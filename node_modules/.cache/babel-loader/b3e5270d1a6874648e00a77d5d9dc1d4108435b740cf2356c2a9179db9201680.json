{"ast":null,"code":"const resolveURL = require('resolve-url');\nconst {\n  log\n} = require('../utils/log');\nmodule.exports = async _ref => {\n  let {\n    corePath: _corePath\n  } = _ref;\n  if (typeof window.createFFmpegCore === 'undefined') {\n    log('info', 'fetch ffmpeg-core.worker.js script');\n    const corePath = resolveURL(_corePath);\n    const workerBlob = await (await fetch(corePath.replace('ffmpeg-core.js', 'ffmpeg-core.worker.js'))).blob();\n    window.FFMPEG_CORE_WORKER_SCRIPT = URL.createObjectURL(workerBlob);\n    log('info', `worker object URL=${window.FFMPEG_CORE_WORKER_SCRIPT}`);\n    log('info', `download ffmpeg-core script (~25 MB) from ${corePath}`);\n    return new Promise(resolve => {\n      const script = document.createElement('script');\n      const eventHandler = () => {\n        script.removeEventListener('load', eventHandler);\n        log('info', 'initialize ffmpeg-core');\n        resolve(window.createFFmpegCore);\n      };\n      script.src = corePath;\n      script.type = 'text/javascript';\n      script.addEventListener('load', eventHandler);\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n  log('info', 'ffmpeg-core is loaded already');\n  return Promise.resolve(window.createFFmpegCore);\n};","map":{"version":3,"names":["resolveURL","require","log","module","exports","_ref","corePath","_corePath","window","createFFmpegCore","workerBlob","fetch","replace","blob","FFMPEG_CORE_WORKER_SCRIPT","URL","createObjectURL","Promise","resolve","script","document","createElement","eventHandler","removeEventListener","src","type","addEventListener","getElementsByTagName","appendChild"],"sources":["/home/dusijian/worksapce/react-app/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js"],"sourcesContent":["const resolveURL = require('resolve-url');\nconst { log } = require('../utils/log');\n\nmodule.exports = async ({ corePath: _corePath }) => {\n  if (typeof window.createFFmpegCore === 'undefined') {\n    log('info', 'fetch ffmpeg-core.worker.js script');\n    const corePath = resolveURL(_corePath);\n    const workerBlob = await (await fetch(corePath.replace('ffmpeg-core.js', 'ffmpeg-core.worker.js'))).blob();\n    window.FFMPEG_CORE_WORKER_SCRIPT = URL.createObjectURL(workerBlob);\n    log('info', `worker object URL=${window.FFMPEG_CORE_WORKER_SCRIPT}`);\n    log('info', `download ffmpeg-core script (~25 MB) from ${corePath}`);\n    return new Promise((resolve) => {\n      const script = document.createElement('script');\n      const eventHandler = () => {\n        script.removeEventListener('load', eventHandler);\n        log('info', 'initialize ffmpeg-core');\n        resolve(window.createFFmpegCore);\n      };\n      script.src = corePath;\n      script.type = 'text/javascript';\n      script.addEventListener('load', eventHandler);\n      document.getElementsByTagName('head')[0].appendChild(script);\n    });\n  }\n  log('info', 'ffmpeg-core is loaded already');\n  return Promise.resolve(window.createFFmpegCore);\n};\n"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,aAAa,CAAC;AACzC,MAAM;EAAEC;AAAI,CAAC,GAAGD,OAAO,CAAC,cAAc,CAAC;AAEvCE,MAAM,CAACC,OAAO,GAAG,MAAAC,IAAA,IAAmC;EAAA,IAA5B;IAAEC,QAAQ,EAAEC;EAAU,CAAC,GAAAF,IAAA;EAC7C,IAAI,OAAOG,MAAM,CAACC,gBAAgB,KAAK,WAAW,EAAE;IAClDP,GAAG,CAAC,MAAM,EAAE,oCAAoC,CAAC;IACjD,MAAMI,QAAQ,GAAGN,UAAU,CAACO,SAAS,CAAC;IACtC,MAAMG,UAAU,GAAG,MAAM,CAAC,MAAMC,KAAK,CAACL,QAAQ,CAACM,OAAO,CAAC,gBAAgB,EAAE,uBAAuB,CAAC,CAAC,EAAEC,IAAI,EAAE;IAC1GL,MAAM,CAACM,yBAAyB,GAAGC,GAAG,CAACC,eAAe,CAACN,UAAU,CAAC;IAClER,GAAG,CAAC,MAAM,EAAG,qBAAoBM,MAAM,CAACM,yBAA0B,EAAC,CAAC;IACpEZ,GAAG,CAAC,MAAM,EAAG,6CAA4CI,QAAS,EAAC,CAAC;IACpE,OAAO,IAAIW,OAAO,CAAEC,OAAO,IAAK;MAC9B,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMC,YAAY,GAAGA,CAAA,KAAM;QACzBH,MAAM,CAACI,mBAAmB,CAAC,MAAM,EAAED,YAAY,CAAC;QAChDpB,GAAG,CAAC,MAAM,EAAE,wBAAwB,CAAC;QACrCgB,OAAO,CAACV,MAAM,CAACC,gBAAgB,CAAC;MAClC,CAAC;MACDU,MAAM,CAACK,GAAG,GAAGlB,QAAQ;MACrBa,MAAM,CAACM,IAAI,GAAG,iBAAiB;MAC/BN,MAAM,CAACO,gBAAgB,CAAC,MAAM,EAAEJ,YAAY,CAAC;MAC7CF,QAAQ,CAACO,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACT,MAAM,CAAC;IAC9D,CAAC,CAAC;EACJ;EACAjB,GAAG,CAAC,MAAM,EAAE,+BAA+B,CAAC;EAC5C,OAAOe,OAAO,CAACC,OAAO,CAACV,MAAM,CAACC,gBAAgB,CAAC;AACjD,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}