{"ast":null,"code":"let duration = 0;\nconst ts2sec = ts => {\n  const [h, m, s] = ts.split(':');\n  return parseFloat(h) * 60 * 60 + parseFloat(m) * 60 + parseFloat(s);\n};\nmodule.exports = (message, progress) => {\n  if (typeof message === 'string') {\n    if (message.startsWith('  Duration')) {\n      const ts = message.split(', ')[0].split(': ')[1];\n      const d = ts2sec(ts);\n      if (duration === 0 || duration > d) {\n        duration = d;\n      }\n    } else if (message.startsWith('frame')) {\n      const ts = message.split('time=')[1].split(' ')[0];\n      const t = ts2sec(ts);\n      progress({\n        ratio: t / duration\n      });\n    } else if (message.startsWith('video:')) {\n      progress({\n        ratio: 1\n      });\n      duration = 0;\n    }\n  }\n};","map":{"version":3,"names":["duration","ts2sec","ts","h","m","s","split","parseFloat","module","exports","message","progress","startsWith","d","t","ratio"],"sources":["/home/dusijian/worksapce/react-app/node_modules/@ffmpeg/ffmpeg/src/utils/parseProgress.js"],"sourcesContent":["let duration = 0;\n\nconst ts2sec = (ts) => {\n  const [h, m, s] = ts.split(':');\n  return (parseFloat(h) * 60 * 60) + (parseFloat(m) * 60) + parseFloat(s);\n};\n\nmodule.exports = (message, progress) => {\n  if (typeof message === 'string') {\n    if (message.startsWith('  Duration')) {\n      const ts = message.split(', ')[0].split(': ')[1];\n      const d = ts2sec(ts);\n      if (duration === 0 || duration > d) {\n        duration = d;\n      }\n    } else if (message.startsWith('frame')) {\n      const ts = message.split('time=')[1].split(' ')[0];\n      const t = ts2sec(ts);\n      progress({ ratio: t / duration });\n    } else if (message.startsWith('video:')) {\n      progress({ ratio: 1 });\n      duration = 0;\n    }\n  }\n};\n"],"mappings":"AAAA,IAAIA,QAAQ,GAAG,CAAC;AAEhB,MAAMC,MAAM,GAAIC,EAAE,IAAK;EACrB,MAAM,CAACC,CAAC,EAAEC,CAAC,EAAEC,CAAC,CAAC,GAAGH,EAAE,CAACI,KAAK,CAAC,GAAG,CAAC;EAC/B,OAAQC,UAAU,CAACJ,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAKI,UAAU,CAACH,CAAC,CAAC,GAAG,EAAG,GAAGG,UAAU,CAACF,CAAC,CAAC;AACzE,CAAC;AAEDG,MAAM,CAACC,OAAO,GAAG,CAACC,OAAO,EAAEC,QAAQ,KAAK;EACtC,IAAI,OAAOD,OAAO,KAAK,QAAQ,EAAE;IAC/B,IAAIA,OAAO,CAACE,UAAU,CAAC,YAAY,CAAC,EAAE;MACpC,MAAMV,EAAE,GAAGQ,OAAO,CAACJ,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;MAChD,MAAMO,CAAC,GAAGZ,MAAM,CAACC,EAAE,CAAC;MACpB,IAAIF,QAAQ,KAAK,CAAC,IAAIA,QAAQ,GAAGa,CAAC,EAAE;QAClCb,QAAQ,GAAGa,CAAC;MACd;IACF,CAAC,MAAM,IAAIH,OAAO,CAACE,UAAU,CAAC,OAAO,CAAC,EAAE;MACtC,MAAMV,EAAE,GAAGQ,OAAO,CAACJ,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAClD,MAAMQ,CAAC,GAAGb,MAAM,CAACC,EAAE,CAAC;MACpBS,QAAQ,CAAC;QAAEI,KAAK,EAAED,CAAC,GAAGd;MAAS,CAAC,CAAC;IACnC,CAAC,MAAM,IAAIU,OAAO,CAACE,UAAU,CAAC,QAAQ,CAAC,EAAE;MACvCD,QAAQ,CAAC;QAAEI,KAAK,EAAE;MAAE,CAAC,CAAC;MACtBf,QAAQ,GAAG,CAAC;IACd;EACF;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}